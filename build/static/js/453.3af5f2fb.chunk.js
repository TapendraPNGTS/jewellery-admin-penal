"use strict";(self.webpackChunkpolity_admin_panel=self.webpackChunkpolity_admin_panel||[]).push([[453],{6895:function(e,t,s){var i=s(8833),n=s(8559),o=s(1493);class r extends o.Z{constructor(){super("https://polity-api.ankitchawda.in/api/"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use((e=>(e.headers.Authorization=`Bearer ${(0,i.aO)()}`,e)))},this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use((e=>e),(e=>Promise.resolve(e)))},this.AllPostConfig=n.Z.Post.All,this.PostByIdConfig=n.Z.Post.PostById,this.EditPostConfig=n.Z.Post.EditPost,this.AddPostConfig=n.Z.Post.AddPost,this.DeletePostConfig=n.Z.Post.DeletePost,this.getAllPost=async()=>this.instance({method:this.AllPostConfig.Method,url:this.AllPostConfig.Endpoint,headers:{},data:null}),this.getPostById=async e=>this.instance({method:this.PostByIdConfig.Method,url:this.PostByIdConfig.Endpoint,headers:{},data:e}),this.addPost=async e=>this.instance({method:this.AddPostConfig.Method,url:this.AddPostConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.editPost=async e=>this.instance({method:this.EditPostConfig.Method,url:this.EditPostConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.deletePost=async e=>this.instance({method:this.DeletePostConfig.Method,url:this.DeletePostConfig.Endpoint,headers:{},data:e}),this._initializeRequestInterceptor(),this._initializeResponseInterceptor()}}t.Z=r},6453:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var i=s(2791),n=s(1889),o=s(7621),r=s(5527),a=s(7247),l=s(1286),d=s(3400),h=s(3504),c=s(3735),u=s(1923),p=s(9836),g=s(3382),x=s(3994),P=s(9281),m=s(6890),j=s(6812),Z=s(5855),f=s(6871),y=s(8550),C=s(5218),w=s(9434),v=s(6895),A=s(574),I=s(184);function b(){(0,f.s0)();const e=(0,w.I0)(),t=new v.Z,s=(0,w.v9)((e=>e.post.Post)),[b,S]=i.useState(""),[k,E]=i.useState(0),[z,_]=(0,i.useState)(10),D=(0,i.useCallback)((async()=>{try{const s=await t.getAllPost();return s&&s.data.data?void e((0,A.Zi)(s.data.data)):C.Am.error("no latest posts available")}catch(s){throw console.error(s),C.Am.error("Something went wrong"),s}}));return(0,i.useEffect)((()=>{D()}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Z,{title:(0,I.jsx)(n.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:u.dv,children:(0,I.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,I.jsx)(y.Z,{fullWidth:!0,id:"outlined-search",label:"Search field",type:"search",onChange:e=>{S(e.target.value)}})})}),content:!1,children:s?(0,I.jsx)(o.Z,{children:(0,I.jsxs)(r.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,I.jsx)(P.Z,{sx:{maxHeight:540},children:(0,I.jsxs)(p.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,I.jsx)(m.Z,{children:(0,I.jsxs)(Z.Z,{children:[(0,I.jsx)(x.Z,{sx:{pl:3},children:"S No."}),(0,I.jsx)(x.Z,{children:"Date Time"}),(0,I.jsx)(x.Z,{children:"Image"}),(0,I.jsx)(x.Z,{children:"Title"}),(0,I.jsx)(x.Z,{children:"Type"}),(0,I.jsx)(x.Z,{children:"Action"})]})}),(0,I.jsx)(g.Z,{children:s.filter((e=>""===b.toLowerCase()?e:e.title.toLowerCase().includes(b))).slice(k*z,k*z+z).map(((e,s)=>{return(0,I.jsxs)(Z.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,I.jsx)(x.Z,{align:"start",children:s+1}),(0,I.jsx)(x.Z,{align:"start",children:e.createdAt?(i=e.createdAt,new Date(i).toLocaleString("en-us",{day:"numeric",month:"short",year:"numeric"})):"-"}),(0,I.jsx)(x.Z,{align:"start",children:"Video"===e.type?(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("video",{width:"100px",controls:!0,children:(0,I.jsx)("source",{src:e.url,type:"video/mp4"})})}):(0,I.jsx)(I.Fragment,{children:(0,I.jsx)("img",{src:e.url,width:"100px"})})}),(0,I.jsx)(x.Z,{align:"start",children:e.title}),(0,I.jsx)(x.Z,{align:"start",children:e.type}),(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(h.rU,{to:`/edit-post/${e.postId}`,children:(0,I.jsx)(d.Z,{color:"primary","aria-label":"view",size:"large",children:(0,I.jsx)(l.Z,{sx:{fontSize:"1.1rem"}})})}),(0,I.jsx)(d.Z,{onClick:s=>{(async e=>{try{var s;const n=await t.deletePost({postId:e});return n&&200===(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.code)?(D(),C.Am.success("Deleted Successfully")):C.Am.error(null===(i=n.data)||void 0===i?void 0:i.message);var i}catch(n){throw console.error(n),C.Am.error("Something went wrong"),n}})(e.postId)},color:"primary","aria-label":"view",size:"large",children:(0,I.jsx)(a.Z,{sx:{fontSize:"1.1rem"}})})]})]},s);var i}))})]})}),(0,I.jsx)(j.Z,{rowsPerPageOptions:[10,20,100],component:"div",count:s.length,rowsPerPage:z,page:k,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{_(+e.target.value),E(0)}})]})}):(0,I.jsx)("h6",{children:"Loading..."})})})}}}]);
//# sourceMappingURL=453.3af5f2fb.chunk.js.map