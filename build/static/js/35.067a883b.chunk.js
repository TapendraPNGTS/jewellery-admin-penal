"use strict";(self.webpackChunkpolity_admin_panel=self.webpackChunkpolity_admin_panel||[]).push([[35],{9655:function(e,t,s){var i=s(8833),n=s(8559),r=s(1493);class a extends r.Z{constructor(){super("https://polity-api.ankitchawda.in/api/"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use((e=>(e.headers.Authorization=`Bearer ${(0,i.aO)()}`,e)))},this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use((e=>e),(e=>Promise.resolve(e)))},this.AllNewsConfig=n.Z.News.All,this.NewsByIdConfig=n.Z.News.NewsById,this.AddNewsConfig=n.Z.News.AddNews,this.EditNewsConfig=n.Z.News.EditNews,this.DeleteNewsConfig=n.Z.News.DeleteNews,this.getAllNews=async()=>this.instance({method:this.AllNewsConfig.Method,url:this.AllNewsConfig.Endpoint,headers:{},data:null}),this.getNewsById=async e=>this.instance({method:this.NewsByIdConfig.Method,url:this.NewsByIdConfig.Endpoint,headers:{},data:e}),this.addNews=async e=>this.instance({method:this.AddNewsConfig.Method,url:this.AddNewsConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.editNews=async e=>this.instance({method:this.EditNewsConfig.Method,url:this.EditNewsConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.deleteNews=async e=>this.instance({method:this.DeleteNewsConfig.Method,url:this.DeleteNewsConfig.Endpoint,headers:{},data:e}),this._initializeRequestInterceptor(),this._initializeResponseInterceptor()}}t.Z=a},3035:function(e,t,s){s.r(t),s.d(t,{default:function(){return b}});var i=s(2791),n=s(1889),r=s(7621),a=s(5527),l=s(7247),o=s(1286),d=s(3400),h=s(3504),c=s(3735),w=s(1923),u=s(9836),g=s(3382),x=s(3994),p=s(9281),m=s(6890),Z=s(6812),f=s(5855),j=s(6871),N=s(8550),y=s(5218),C=s(9434),v=s(9655),A=s(8541),I=s(184);function b(){(0,j.s0)();const e=(0,C.I0)(),t=new v.Z,s=(0,C.v9)((e=>e.news.News)),[b,k]=i.useState(""),[S,E]=i.useState(0),[P,z]=(0,i.useState)(10),D=(0,i.useCallback)((async()=>{try{const s=await t.getAllNews();return s&&s.data.data?void e((0,A.k3)(s.data.data)):y.Am.error("no latest news available")}catch(s){throw console.error(s),y.Am.error("Something went wrong"),s}}));return(0,i.useEffect)((()=>{D()}),[]),(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(c.Z,{title:(0,I.jsx)(n.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:w.dv,children:(0,I.jsx)(n.ZP,{item:!0,xs:12,md:12,children:(0,I.jsx)(N.Z,{fullWidth:!0,id:"outlined-search",label:"Search field",type:"search",onChange:e=>{k(e.target.value)}})})}),content:!1,children:s?(0,I.jsx)(r.Z,{children:(0,I.jsxs)(a.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,I.jsx)(p.Z,{sx:{maxHeight:540},children:(0,I.jsxs)(u.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,I.jsx)(m.Z,{children:(0,I.jsxs)(f.Z,{children:[(0,I.jsx)(x.Z,{sx:{pl:3},children:"S No."}),(0,I.jsx)(x.Z,{children:"Date Time"}),(0,I.jsx)(x.Z,{children:"Image"}),(0,I.jsx)(x.Z,{children:"Title"}),(0,I.jsx)(x.Z,{children:"Description"}),(0,I.jsx)(x.Z,{children:"Action"})]})}),(0,I.jsx)(g.Z,{children:s.filter((e=>""===b.toLowerCase()?e:e.title.toLowerCase().includes(b))).slice(S*P,S*P+P).map(((e,s)=>{return(0,I.jsxs)(f.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,I.jsx)(x.Z,{align:"start",children:s+1}),(0,I.jsx)(x.Z,{align:"start",children:e.createdAt?(i=e.createdAt,new Date(i).toLocaleString("en-us",{day:"numeric",month:"short",year:"numeric"})):"-"}),(0,I.jsx)(x.Z,{align:"start",children:(0,I.jsx)("img",{src:e.url,width:"100px"})}),(0,I.jsx)(x.Z,{align:"start",children:e.title}),(0,I.jsx)(x.Z,{align:"start",children:e.description}),(0,I.jsxs)(x.Z,{children:[(0,I.jsx)(h.rU,{to:`/edit-news/${e.newsId}`,children:(0,I.jsx)(d.Z,{color:"primary","aria-label":"view",size:"large",children:(0,I.jsx)(o.Z,{sx:{fontSize:"1.1rem"}})})}),(0,I.jsx)(d.Z,{onClick:s=>{(async e=>{try{var s;const n=await t.deleteNews({newsId:e});return n&&200===(null===n||void 0===n||null===(s=n.data)||void 0===s?void 0:s.code)?(D(),y.Am.success("Deleted Successfully")):y.Am.error(null===(i=n.data)||void 0===i?void 0:i.message);var i}catch(n){throw console.error(n),y.Am.error("Something went wrong"),n}})(e.newsId)},color:"primary","aria-label":"view",size:"large",children:(0,I.jsx)(l.Z,{sx:{fontSize:"1.1rem"}})})]})]},s);var i}))})]})}),(0,I.jsx)(Z.Z,{rowsPerPageOptions:[10,20,100],component:"div",count:s.length,rowsPerPage:P,page:S,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{z(+e.target.value),E(0)}})]})}):(0,I.jsx)("h6",{children:"Loading..."})})})}}}]);
//# sourceMappingURL=35.067a883b.chunk.js.map