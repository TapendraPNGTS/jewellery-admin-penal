"use strict";(self.webpackChunkpolity_admin_panel=self.webpackChunkpolity_admin_panel||[]).push([[37],{4935:function(e,t,s){var i=s(8833),a=s(8559),n=s(1493);class r extends n.Z{constructor(){super("https://polity-api.ankitchawda.in/api/"),this._initializeRequestInterceptor=()=>{this.instance.interceptors.request.use((e=>(e.headers.Authorization=`Bearer ${(0,i.aO)()}`,e)))},this._initializeResponseInterceptor=()=>{this.instance.interceptors.response.use((e=>e),(e=>Promise.resolve(e)))},this.AllTaskConfig=a.Z.Task.All,this.TaskByIdConfig=a.Z.Task.TaskById,this.AddTaskConfig=a.Z.Task.AddTask,this.EditTaskConfig=a.Z.Task.EditTask,this.DeleteTaskConfig=a.Z.Task.DeleteTask,this.getAllTask=async()=>this.instance({method:this.AllTaskConfig.Method,url:this.AllTaskConfig.Endpoint,headers:{},data:null}),this.getTaskById=async e=>this.instance({method:this.TaskByIdConfig.Method,url:this.TaskByIdConfig.Endpoint,headers:{},data:e}),this.addTask=async e=>this.instance({method:this.AddTaskConfig.Method,url:this.AddTaskConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.editTask=async e=>this.instance({method:this.EditTaskConfig.Method,url:this.EditTaskConfig.Endpoint,headers:{"Content-Type":"multipart/form-data"},data:e}),this.deleteTask=async e=>this.instance({method:this.DeleteTaskConfig.Method,url:this.DeleteTaskConfig.Endpoint,headers:{},data:e}),this._initializeRequestInterceptor(),this._initializeResponseInterceptor()}}t.Z=r},1037:function(e,t,s){s.r(t),s.d(t,{default:function(){return I}});var i=s(2791),a=s(1889),n=s(7621),r=s(5527),l=s(7247),o=s(1286),d=s(3400),h=s(3504),c=s(3735),u=s(1923),g=s(9836),k=s(3382),x=s(3994),p=s(9281),m=s(6890),Z=s(6812),T=s(5855),f=s(6871),j=s(8550),y=s(5218),C=s(9434),w=s(4935),v=s(8404),A=s(184);function I(){(0,f.s0)();const e=(0,C.I0)(),t=new w.Z,s=(0,C.v9)((e=>e.task.Task)),[I,b]=i.useState(""),[S,E]=i.useState(0),[P,z]=(0,i.useState)(10),D=(0,i.useCallback)((async()=>{try{const s=await t.getAllTask();return s&&s.data.data?void e((0,v.fF)(s.data.data)):y.Am.error("no latest tasks available")}catch(s){throw console.error(s),y.Am.error("Something went wrong"),s}}));return(0,i.useEffect)((()=>{D()}),[]),(0,A.jsx)(A.Fragment,{children:(0,A.jsx)(c.Z,{title:(0,A.jsx)(a.ZP,{container:!0,alignItems:"center",justifyContent:"space-between",spacing:u.dv,children:(0,A.jsx)(a.ZP,{item:!0,xs:12,md:12,children:(0,A.jsx)(j.Z,{fullWidth:!0,id:"outlined-search",label:"Search field",type:"search",onChange:e=>{b(e.target.value)}})})}),content:!1,children:s?(0,A.jsx)(n.Z,{children:(0,A.jsxs)(r.Z,{sx:{width:"100%",overflow:"hidden"},children:[(0,A.jsx)(p.Z,{sx:{maxHeight:540},children:(0,A.jsxs)(g.Z,{stickyHeader:!0,"aria-label":"sticky table",children:[(0,A.jsx)(m.Z,{children:(0,A.jsxs)(T.Z,{children:[(0,A.jsx)(x.Z,{sx:{pl:3},children:"S No."}),(0,A.jsx)(x.Z,{children:"Date Time"}),(0,A.jsx)(x.Z,{children:"Image"}),(0,A.jsx)(x.Z,{children:"Title"}),(0,A.jsx)(x.Z,{children:"Description"}),(0,A.jsx)(x.Z,{children:"Action"})]})}),(0,A.jsx)(k.Z,{children:s.filter((e=>""===I.toLowerCase()?e:e.title.toLowerCase().includes(I))).slice(S*P,S*P+P).map(((e,s)=>{return(0,A.jsxs)(T.Z,{hover:!0,role:"checkbox",tabIndex:-1,children:[(0,A.jsx)(x.Z,{align:"start",children:s+1}),(0,A.jsx)(x.Z,{align:"start",children:e.createdAt?(i=e.createdAt,new Date(i).toLocaleString("en-us",{day:"numeric",month:"short",year:"numeric"})):"-"}),(0,A.jsx)(x.Z,{align:"start",children:(0,A.jsx)("img",{src:e.image,width:"100px"})}),(0,A.jsx)(x.Z,{align:"start",children:e.title}),(0,A.jsx)(x.Z,{align:"start",children:e.description}),(0,A.jsxs)(x.Z,{children:[(0,A.jsx)(h.rU,{to:`/edit-task/${e.taskId}`,children:(0,A.jsx)(d.Z,{color:"primary","aria-label":"view",size:"large",children:(0,A.jsx)(o.Z,{sx:{fontSize:"1.1rem"}})})}),(0,A.jsx)(d.Z,{onClick:s=>{(async e=>{try{var s;const a=await t.deleteTask({taskId:e});return a&&200===(null===a||void 0===a||null===(s=a.data)||void 0===s?void 0:s.code)?(D(),y.Am.success("Deleted Successfully")):y.Am.error(null===(i=a.data)||void 0===i?void 0:i.message);var i}catch(a){throw console.error(a),y.Am.error("Something went wrong"),a}})(e.taskId)},color:"primary","aria-label":"view",size:"large",children:(0,A.jsx)(l.Z,{sx:{fontSize:"1.1rem"}})})]})]},s);var i}))})]})}),(0,A.jsx)(Z.Z,{rowsPerPageOptions:[10,20,100],component:"div",count:s.length,rowsPerPage:P,page:S,onPageChange:(e,t)=>{E(t)},onRowsPerPageChange:e=>{z(+e.target.value),E(0)}})]})}):(0,A.jsx)("h6",{children:"Loading..."})})})}}}]);
//# sourceMappingURL=37.d7d8fe6d.chunk.js.map